[gd_scene load_steps=68 format=3 uid="uid://cotlpgucmbbhy"]

[ext_resource type="Script" uid="uid://dfq6vdp2s7bkf" path="res://scripts/main_character.gd" id="1_72jni"]
[ext_resource type="PhysicsMaterial" uid="uid://bfeae8w0xhk85" path="res://misc/SpinnerPhysicsMaterial.tres" id="1_q0jrw"]
[ext_resource type="Texture2D" uid="uid://de8us5naswkua" path="res://sprites/dragosterrible/particle.png" id="2_ygpbf"]
[ext_resource type="PackedScene" uid="uid://bkeu04vc2k4sl" path="res://scenes/components/health_component.tscn" id="3_lo101"]
[ext_resource type="Texture2D" uid="uid://chol8xoxbvyf" path="res://scenes/explosion.png" id="4_7112l"]
[ext_resource type="Texture2D" uid="uid://cble6vp0ldqy3" path="res://sprites/placeholder/spinningtopfirstproto.png" id="4_f6rpi"]
[ext_resource type="AudioStream" uid="uid://dd0fy1ovymn4b" path="res://sound_effects/clash1.ogg" id="4_qn757"]
[ext_resource type="AudioStream" uid="uid://dgu4qxnk4s77i" path="res://sound_effects/clash2.ogg" id="5_g1lp1"]
[ext_resource type="AudioStream" uid="uid://doewqhkmk87c4" path="res://sound_effects/charliespinner/youdie.wav" id="6_ery5u"]
[ext_resource type="AudioStream" uid="uid://b470m7vxv25oi" path="res://sound_effects/dash.ogg" id="6_icwvi"]
[ext_resource type="AudioStream" uid="uid://cq3im8xl3mlt2" path="res://sound_effects/hitland.ogg" id="7_63jd1"]
[ext_resource type="AudioStream" uid="uid://dl20dfxu1n1q7" path="res://sound_effects/spinning.ogg" id="7_oqu8g"]
[ext_resource type="AudioStream" uid="uid://bi6tdu1gy3jyo" path="res://sound_effects/princely/sparkle.wav" id="8_5t4ic"]
[ext_resource type="AudioStream" uid="uid://wokre5lh5tu2" path="res://sound_effects/charliespinner/ouch_03.wav" id="8_cspgv"]
[ext_resource type="AudioStream" uid="uid://c7857aag6aepi" path="res://sound_effects/charliespinner/ouch_05.wav" id="9_2i7x1"]
[ext_resource type="AudioStream" uid="uid://dxr5b7kqdop6f" path="res://sound_effects/charliespinner/ouch_07.wav" id="10_re6f7"]
[ext_resource type="Texture2D" uid="uid://cqtywoq0lqmjl" path="res://asesprite/ericsprite/clasheffect1.png" id="11_3uu4x"]
[ext_resource type="Texture2D" uid="uid://bkm0q6pcaowns" path="res://asesprite/ericsprite/dasheffect.png" id="14_dpbku"]

[sub_resource type="Curve" id="Curve_sk41o"]
_limits = [-1.0, 1.0, 0.0, 1.0]
_data = [Vector2(0.284211, -0.67033), 0.0, 7.26903, 0, 0, Vector2(1, 1), -0.0907787, 0.0, 0, 0]
point_count = 2

[sub_resource type="CircleShape2D" id="CircleShape2D_d632g"]
radius = 16.0

[sub_resource type="AtlasTexture" id="AtlasTexture_necyd"]
atlas = ExtResource("4_f6rpi")
region = Rect2(0, 0, 72, 76)

[sub_resource type="AtlasTexture" id="AtlasTexture_u386e"]
atlas = ExtResource("4_f6rpi")
region = Rect2(72, 0, 72, 76)

[sub_resource type="AtlasTexture" id="AtlasTexture_6xgrq"]
atlas = ExtResource("4_f6rpi")
region = Rect2(0, 76, 72, 76)

[sub_resource type="AtlasTexture" id="AtlasTexture_u151a"]
atlas = ExtResource("4_7112l")
region = Rect2(0, 0, 115, 108)

[sub_resource type="AtlasTexture" id="AtlasTexture_t3p4r"]
atlas = ExtResource("4_7112l")
region = Rect2(115, 0, 115, 108)

[sub_resource type="AtlasTexture" id="AtlasTexture_ej8qj"]
atlas = ExtResource("4_7112l")
region = Rect2(230, 0, 115, 108)

[sub_resource type="AtlasTexture" id="AtlasTexture_ch5h0"]
atlas = ExtResource("4_7112l")
region = Rect2(345, 0, 115, 108)

[sub_resource type="AtlasTexture" id="AtlasTexture_s44x6"]
atlas = ExtResource("4_7112l")
region = Rect2(0, 108, 115, 108)

[sub_resource type="AtlasTexture" id="AtlasTexture_ba5cx"]
atlas = ExtResource("4_7112l")
region = Rect2(115, 108, 115, 108)

[sub_resource type="AtlasTexture" id="AtlasTexture_h3e4r"]
atlas = ExtResource("4_7112l")
region = Rect2(230, 108, 115, 108)

[sub_resource type="AtlasTexture" id="AtlasTexture_8vqe8"]
atlas = ExtResource("4_7112l")
region = Rect2(345, 108, 115, 108)

[sub_resource type="AtlasTexture" id="AtlasTexture_23sri"]
atlas = ExtResource("4_7112l")
region = Rect2(0, 216, 115, 108)

[sub_resource type="AtlasTexture" id="AtlasTexture_ff7x0"]
atlas = ExtResource("4_7112l")
region = Rect2(115, 216, 115, 108)

[sub_resource type="AtlasTexture" id="AtlasTexture_do4k8"]
atlas = ExtResource("4_7112l")
region = Rect2(230, 216, 115, 108)

[sub_resource type="AtlasTexture" id="AtlasTexture_rrh3d"]
atlas = ExtResource("4_7112l")
region = Rect2(345, 216, 115, 108)

[sub_resource type="AtlasTexture" id="AtlasTexture_pnjir"]
atlas = ExtResource("4_7112l")
region = Rect2(0, 324, 115, 108)

[sub_resource type="AtlasTexture" id="AtlasTexture_sdqew"]
atlas = ExtResource("4_7112l")
region = Rect2(115, 324, 115, 108)

[sub_resource type="AtlasTexture" id="AtlasTexture_fgp4t"]
atlas = ExtResource("4_7112l")
region = Rect2(230, 324, 115, 108)

[sub_resource type="AtlasTexture" id="AtlasTexture_bwy3b"]
atlas = ExtResource("4_7112l")
region = Rect2(345, 324, 115, 108)

[sub_resource type="SpriteFrames" id="SpriteFrames_cmjbe"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_necyd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_u386e")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6xgrq")
}],
"loop": true,
"name": &"default",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_u151a")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_t3p4r")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ej8qj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_u151a")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ch5h0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_s44x6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ba5cx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_h3e4r")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8vqe8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_23sri")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ff7x0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_do4k8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rrh3d")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_pnjir")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_sdqew")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fgp4t")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bwy3b")
}],
"loop": false,
"name": &"die",
"speed": 5.0
}]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_40fga"]
animation = &"die"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_usv1h"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_0jryu"]
animation = &"jump"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_m0mbo"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_tr7di"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_0ylf7"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_lsadd"]

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_t2dfo"]
states/Start/position = Vector2(231.429, 108)
states/die/node = SubResource("AnimationNodeAnimation_40fga")
states/die/position = Vector2(593.571, 68.8572)
states/idle/node = SubResource("AnimationNodeAnimation_usv1h")
states/idle/position = Vector2(447.627, 162)
states/jump/node = SubResource("AnimationNodeAnimation_0jryu")
states/jump/position = Vector2(365.976, -7.5714)
transitions = ["jump", "idle", SubResource("AnimationNodeStateMachineTransition_m0mbo"), "idle", "jump", SubResource("AnimationNodeStateMachineTransition_tr7di"), "Start", "idle", SubResource("AnimationNodeStateMachineTransition_0ylf7"), "idle", "die", SubResource("AnimationNodeStateMachineTransition_lsadd")]
graph_offset = Vector2(141, -52)

[sub_resource type="Animation" id="Animation_byfn0"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatedSprite2D:offset")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, -10)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("AnimatedSprite2D:animation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"default"]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("CollisionShape2D:disabled")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_8wlpm"]
resource_name = "die"
length = 3.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatedSprite2D:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.0333333),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"die"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("CollisionShape2D:disabled")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.2),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/2/type = "method"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath(".")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(1.5),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"bringUpMenu"
}]
}

[sub_resource type="Animation" id="Animation_lflkc"]
resource_name = "idle"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatedSprite2D:offset")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.0333333),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, 0)]
}

[sub_resource type="Animation" id="Animation_g2050"]
resource_name = "jump"
length = 0.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatedSprite2D:offset")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.00477858, 0.1, 0.194353),
"transitions": PackedFloat32Array(0.707107, 1.89465, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(0, -50), Vector2(0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_1iu5i"]
_data = {
&"RESET": SubResource("Animation_byfn0"),
&"die": SubResource("Animation_8wlpm"),
&"idle": SubResource("Animation_lflkc"),
&"jump": SubResource("Animation_g2050")
}

[sub_resource type="Curve" id="Curve_o0p88"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 0.00596094), -3.32991, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_jpq25"]
curve = SubResource("Curve_o0p88")

[sub_resource type="Gradient" id="Gradient_kse4c"]
offsets = PackedFloat32Array(0, 0.995025)
colors = PackedColorArray(1, 0.5, 0, 1, 0.98, 0.875467, 0.3528, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_oi0w3"]
gradient = SubResource("Gradient_kse4c")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_pj1cs"]
particle_flag_disable_z = true
spread = 65.0
initial_velocity_min = 312.94
initial_velocity_max = 523.64
linear_accel_min = -40.89
linear_accel_max = -2.23517e-06
scale_max = 3.0
color_initial_ramp = SubResource("GradientTexture1D_oi0w3")
alpha_curve = SubResource("CurveTexture_jpq25")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_2lcra"]
particle_flag_disable_z = true
angle_min = 64.4
angle_max = 64.4
gravity = Vector3(0, 0, 0)
scale_min = 2.0
scale_max = 2.0
color = Color(0.542073, 0.957133, 0.983983, 1)
hue_variation_min = -0.06
hue_variation_max = 0.04

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_yhso0"]
random_pitch = 1.1
streams_count = 2
stream_0/stream = ExtResource("4_qn757")
stream_1/stream = ExtResource("5_g1lp1")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_wbm8i"]
random_pitch = 1.1
streams_count = 1
stream_0/stream = ExtResource("8_5t4ic")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_1oxy7"]
random_pitch = 1.3
streams_count = 1
stream_0/stream = ExtResource("7_63jd1")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_nvuyw"]
random_pitch = 1.1
streams_count = 3
stream_0/stream = ExtResource("8_cspgv")
stream_1/stream = ExtResource("9_2i7x1")
stream_2/stream = ExtResource("10_re6f7")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_3aysq"]
random_pitch = 1.1
streams_count = 1
stream_0/stream = ExtResource("6_icwvi")

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_6yr42"]
particles_animation = true
particles_anim_h_frames = 3
particles_anim_v_frames = 3
particles_anim_loop = false

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_usm4s"]
particles_animation = true
particles_anim_h_frames = 3
particles_anim_v_frames = 3
particles_anim_loop = false

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_ibffk"]
particle_flag_disable_z = true
angle_min = -355.3
angle_max = 172.5
gravity = Vector3(0, 0, 0)
scale_max = 2.0
anim_speed_min = 1.89
anim_speed_max = 2.52

[node name="MainSpinner" type="RigidBody2D" groups=["player"]]
texture_filter = 1
collision_mask = 7
physics_material_override = ExtResource("1_q0jrw")
lock_rotation = true
continuous_cd = 1
contact_monitor = true
max_contacts_reported = 1
linear_damp = 0.05
script = ExtResource("1_72jni")
VOLUME_CURVE = SubResource("Curve_sk41o")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_d632g")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
texture_filter = 1
sprite_frames = SubResource("SpriteFrames_cmjbe")
autoplay = "default"
metadata/_aseprite_wizard_interface_config_ = {
"layer_section": true,
"output_section": true,
"pending_changes": {}
}
metadata/_aseprite_wizard_config_ = {
"layers": [],
"o_ex_p": "",
"o_folder": "res://sprites/placeholder",
"o_name": "",
"only_visible": true,
"should_round_fps": true,
"slice": "",
"source": "res://asesprite/alexstuff/spinningtopfirstproto.aseprite"
}
metadata/_aseprite_wizard_source_file_hash_ = "110119e6731a00e2dfe8855dc66da1dd"

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeStateMachine_t2dfo")
anim_player = NodePath("AnimationPlayer")

[node name="AnimationPlayer" type="AnimationPlayer" parent="AnimationTree"]
root_node = NodePath("../..")
libraries = {
&"": SubResource("AnimationLibrary_1iu5i")
}

[node name="LocationTimer" type="Timer" parent="."]
wait_time = 0.1
autostart = true

[node name="DampTimer" type="Timer" parent="."]
process_callback = 0
wait_time = 0.3
one_shot = true

[node name="Sparks" type="GPUParticles2D" parent="."]
z_index = 5
emitting = false
amount = 7
texture = ExtResource("2_ygpbf")
lifetime = 0.2
one_shot = true
explosiveness = 1.0
process_material = SubResource("ParticleProcessMaterial_pj1cs")

[node name="GPUParticles2D" type="GPUParticles2D" parent="."]
emitting = false
amount = 40
texture = ExtResource("2_ygpbf")
lifetime = 4.0
trail_lifetime = 1.32
process_material = SubResource("ParticleProcessMaterial_2lcra")

[node name="deathsound" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("6_ery5u")

[node name="Clash_SE" type="AudioStreamPlayer2D" parent="."]
stream = SubResource("AudioStreamRandomizer_yhso0")
volume_db = -5.295
max_polyphony = 3
playback_type = 2

[node name="Sparkle" type="AudioStreamPlayer2D" parent="."]
stream = SubResource("AudioStreamRandomizer_wbm8i")

[node name="Hit_SE" type="AudioStreamPlayer2D" parent="."]
stream = SubResource("AudioStreamRandomizer_1oxy7")
volume_db = -5.535

[node name="Spinnerouch_SE" type="AudioStreamPlayer2D" parent="."]
stream = SubResource("AudioStreamRandomizer_nvuyw")
volume_db = 4.575

[node name="Dash_SE" type="AudioStreamPlayer2D" parent="."]
stream = SubResource("AudioStreamRandomizer_3aysq")
volume_db = 1.981

[node name="Spinning_SE" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("7_oqu8g")
volume_db = -6.95
autoplay = true
parameters/looping = true

[node name="HealthComponent" parent="." instance=ExtResource("3_lo101")]
max_health = 100
current_health = 100
isPlayer = true

[node name="DashEffect" type="CPUParticles2D" parent="."]
texture_filter = 1
material = SubResource("CanvasItemMaterial_6yr42")
emitting = false
amount = 1
texture = ExtResource("14_dpbku")
one_shot = true
speed_scale = 2.24
particle_flag_align_y = true
direction = Vector2(0, 0)
spread = 0.0
gravity = Vector2(0, 0)
anim_speed_min = 1.0
anim_speed_max = 1.2

[node name="hitsparks" type="GPUParticles2D" parent="."]
material = SubResource("CanvasItemMaterial_usm4s")
emitting = false
amount = 1
texture = ExtResource("11_3uu4x")
one_shot = true
process_material = SubResource("ParticleProcessMaterial_ibffk")

[connection signal="body_entered" from="." to="." method="_on_body_entered"]
[connection signal="timeout" from="LocationTimer" to="." method="_on_location_timer_timeout"]
[connection signal="timeout" from="DampTimer" to="." method="_on_damp_timer_timeout"]
