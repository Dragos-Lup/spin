[gd_scene load_steps=34 format=3 uid="uid://cotlpgucmbbhy"]

[ext_resource type="Script" path="res://scripts/main_character.gd" id="1_72jni"]
[ext_resource type="PhysicsMaterial" uid="uid://bfeae8w0xhk85" path="res://misc/SpinnerPhysicsMaterial.tres" id="1_q0jrw"]
[ext_resource type="Texture2D" uid="uid://de8us5naswkua" path="res://sprites/dragosterrible/particle.png" id="2_ygpbf"]
[ext_resource type="PackedScene" uid="uid://bkeu04vc2k4sl" path="res://scenes/components/health_component.tscn" id="3_lo101"]
[ext_resource type="Texture2D" uid="uid://cble6vp0ldqy3" path="res://sprites/placeholder/spinningtopfirstproto.png" id="4_f6rpi"]
[ext_resource type="AudioStream" uid="uid://dd0fy1ovymn4b" path="res://sound_effects/clash1.ogg" id="4_qn757"]
[ext_resource type="AudioStream" uid="uid://dgu4qxnk4s77i" path="res://sound_effects/clash2.ogg" id="5_g1lp1"]
[ext_resource type="AudioStream" uid="uid://b470m7vxv25oi" path="res://sound_effects/dash.ogg" id="6_icwvi"]
[ext_resource type="AudioStream" uid="uid://dl20dfxu1n1q7" path="res://sound_effects/spinning.ogg" id="7_oqu8g"]

[sub_resource type="Curve" id="Curve_sk41o"]
min_value = -1.0
_data = [Vector2(0.284211, -0.67033), 0.0, 7.26903, 0, 0, Vector2(1, 1), -0.0907787, 0.0, 0, 0]
point_count = 2

[sub_resource type="CircleShape2D" id="CircleShape2D_d632g"]
radius = 16.0

[sub_resource type="AtlasTexture" id="AtlasTexture_fbcg3"]
atlas = ExtResource("4_f6rpi")
region = Rect2(0, 0, 72, 76)

[sub_resource type="AtlasTexture" id="AtlasTexture_mjxt4"]
atlas = ExtResource("4_f6rpi")
region = Rect2(72, 0, 72, 76)

[sub_resource type="AtlasTexture" id="AtlasTexture_136ul"]
atlas = ExtResource("4_f6rpi")
region = Rect2(0, 76, 72, 76)

[sub_resource type="SpriteFrames" id="SpriteFrames_bkwlk"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_fbcg3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_mjxt4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_136ul")
}],
"loop": true,
"name": &"default",
"speed": 10.0
}]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_usv1h"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_0jryu"]
animation = &"jump"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_m0mbo"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_tr7di"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_0ylf7"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_t2dfo"]
states/Start/position = Vector2(231.429, 108)
states/idle/node = SubResource("AnimationNodeAnimation_usv1h")
states/idle/position = Vector2(484.198, 126.571)
states/jump/node = SubResource("AnimationNodeAnimation_0jryu")
states/jump/position = Vector2(484.262, 32.4286)
transitions = ["jump", "idle", SubResource("AnimationNodeStateMachineTransition_m0mbo"), "idle", "jump", SubResource("AnimationNodeStateMachineTransition_tr7di"), "Start", "idle", SubResource("AnimationNodeStateMachineTransition_0ylf7")]
graph_offset = Vector2(-43, -9)

[sub_resource type="Animation" id="Animation_byfn0"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatedSprite2D:offset")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, -10)]
}

[sub_resource type="Animation" id="Animation_lflkc"]
resource_name = "idle"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatedSprite2D:offset")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.0333333),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, 0)]
}

[sub_resource type="Animation" id="Animation_g2050"]
resource_name = "jump"
length = 0.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatedSprite2D:offset")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.00477858, 0.1, 0.194353),
"transitions": PackedFloat32Array(0.707107, 1.89465, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(0, -50), Vector2(0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_1iu5i"]
_data = {
"RESET": SubResource("Animation_byfn0"),
"idle": SubResource("Animation_lflkc"),
"jump": SubResource("Animation_g2050")
}

[sub_resource type="Curve" id="Curve_o0p88"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 0.00596094), -3.32991, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_jpq25"]
curve = SubResource("Curve_o0p88")

[sub_resource type="Gradient" id="Gradient_kse4c"]
offsets = PackedFloat32Array(0, 0.995025)
colors = PackedColorArray(1, 0.5, 0, 1, 0.98, 0.875467, 0.3528, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_oi0w3"]
gradient = SubResource("Gradient_kse4c")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_pj1cs"]
particle_flag_disable_z = true
spread = 65.0
initial_velocity_min = 312.94
initial_velocity_max = 523.64
linear_accel_min = -40.89
linear_accel_max = -2.23517e-06
scale_max = 3.0
color_initial_ramp = SubResource("GradientTexture1D_oi0w3")
alpha_curve = SubResource("CurveTexture_jpq25")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_2lcra"]
particle_flag_disable_z = true
gravity = Vector3(0, 0, 0)

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_yhso0"]
random_pitch = 1.1
streams_count = 2
stream_0/stream = ExtResource("4_qn757")
stream_1/stream = ExtResource("5_g1lp1")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_3aysq"]
random_pitch = 1.1
streams_count = 1
stream_0/stream = ExtResource("6_icwvi")

[node name="MainSpinner" type="RigidBody2D"]
texture_filter = 1
collision_mask = 7
physics_material_override = ExtResource("1_q0jrw")
lock_rotation = true
continuous_cd = 1
contact_monitor = true
max_contacts_reported = 1
linear_damp = 0.05
script = ExtResource("1_72jni")
VOLUME_CURVE = SubResource("Curve_sk41o")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_d632g")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
texture_filter = 1
sprite_frames = SubResource("SpriteFrames_bkwlk")
autoplay = "default"
metadata/_aseprite_wizard_interface_config_ = {
"layer_section": true,
"output_section": true,
"pending_changes": {}
}
metadata/_aseprite_wizard_config_ = {
"layers": [],
"o_ex_p": "",
"o_folder": "res://sprites/placeholder",
"o_name": "",
"only_visible": true,
"should_round_fps": true,
"slice": "",
"source": "res://asesprite/alexstuff/spinningtopfirstproto.aseprite"
}
metadata/_aseprite_wizard_source_file_hash_ = "110119e6731a00e2dfe8855dc66da1dd"

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeStateMachine_t2dfo")
anim_player = NodePath("AnimationPlayer")

[node name="AnimationPlayer" type="AnimationPlayer" parent="AnimationTree"]
root_node = NodePath("../..")
libraries = {
"": SubResource("AnimationLibrary_1iu5i")
}

[node name="LocationTimer" type="Timer" parent="."]
wait_time = 0.1
autostart = true

[node name="Sparks" type="GPUParticles2D" parent="."]
z_index = 5
emitting = false
amount = 7
process_material = SubResource("ParticleProcessMaterial_pj1cs")
texture = ExtResource("2_ygpbf")
lifetime = 0.2
one_shot = true
explosiveness = 1.0

[node name="GPUParticles2D" type="GPUParticles2D" parent="."]
amount = 30
process_material = SubResource("ParticleProcessMaterial_2lcra")
texture = ExtResource("2_ygpbf")
lifetime = 3.0
trail_lifetime = 1.32

[node name="Clash_SE" type="AudioStreamPlayer2D" parent="."]
stream = SubResource("AudioStreamRandomizer_yhso0")
volume_db = -0.465
max_polyphony = 3
playback_type = 2

[node name="Dash_SE" type="AudioStreamPlayer2D" parent="."]
stream = SubResource("AudioStreamRandomizer_3aysq")
volume_db = 1.981

[node name="Spinning_SE" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("7_oqu8g")
autoplay = true
parameters/looping = true

[node name="HealthComponent" parent="." instance=ExtResource("3_lo101")]

[connection signal="body_entered" from="." to="." method="_on_body_entered"]
[connection signal="timeout" from="LocationTimer" to="." method="_on_location_timer_timeout"]
